"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[648],{2649(e,n,r){r.d(n,{R:()=>c,x:()=>l});var i=r(1299);const s={},t=i.createContext(s);function c(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(t.Provider,{value:n},e.children)}},3581(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"packages/nestjs-grpc","title":"@globalart/nestjs-grpc","description":"A NestJS module for working with gRPC clients and servers. Provides a convenient API for creating and using gRPC clients, as well as configuring gRPC servers with health checks and reflection support.","source":"@site/content/packages/nestjs-grpc.mdx","sourceDirName":"packages","slug":"/packages/nestjs-grpc","permalink":"/packages/nestjs-grpc","draft":false,"unlisted":false,"editUrl":"https://github.com/GlobalArtInc/ecosystem/tree/main/docs/content/packages/nestjs-grpc.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"@globalart/nestjs-etcd","permalink":"/packages/nestjs-etcd"},"next":{"title":"@globalart/nestjs-temporal","permalink":"/packages/nestjs-temporal"}}');var s=r(6259),t=r(2649);const c={sidebar_position:6},l="@globalart/nestjs-grpc",o={},a=[{value:"Installation",id:"installation",level:2},{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Module Setup",id:"module-setup",level:3},{value:"Using the Client",id:"using-the-client",level:3},{value:"Configuring gRPC Server",id:"configuring-grpc-server",level:3},{value:"Configuration",id:"configuration",level:2},{value:"GrpcModuleOptions",id:"grpcmoduleoptions",level:3},{value:"GrpcOptionsClient",id:"grpcoptionsclient",level:3},{value:"Usage",id:"usage",level:2},{value:"Create a client",id:"create-a-client",level:3},{value:"Usage with metadata",id:"usage-with-metadata",level:3},{value:"Sending metadata",id:"sending-metadata",level:4},{value:"Receiving metadata",id:"receiving-metadata",level:4},{value:"API Reference",id:"api-reference",level:2},{value:"GrpcModule",id:"grpcmodule",level:3},{value:"<code>forRoot(options: GrpcOptions): DynamicModule</code>",id:"forrootoptions-grpcoptions-dynamicmodule",level:4},{value:"AbstractGrpcClient",id:"abstractgrpcclient",level:3},{value:"InjectGrpcClient",id:"injectgrpcclient",level:3},{value:"getGrpcConfig",id:"getgrpcconfig",level:3},{value:"Features",id:"features",level:2},{value:"Health Checks",id:"health-checks",level:3},{value:"Reflection",id:"reflection",level:3},{value:"Global Module",id:"global-module",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Error Handling",id:"error-handling",level:3},{value:"Using Multiple Clients",id:"using-multiple-clients",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Client Not Found",id:"client-not-found",level:3},{value:"Connection Errors",id:"connection-errors",level:3},{value:"Type Issues",id:"type-issues",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"globalartnestjs-grpc",children:"@globalart/nestjs-grpc"})}),"\n",(0,s.jsx)(n.p,{children:"A NestJS module for working with gRPC clients and servers. Provides a convenient API for creating and using gRPC clients, as well as configuring gRPC servers with health checks and reflection support."}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"npm2yarn",children:"npm install @globalart/nestjs-grpc @nestjs/microservices\n"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"@globalart/nestjs-grpc"})," package simplifies working with gRPC in NestJS applications by providing:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Easy client creation"})," - Configure multiple gRPC clients through configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type safety"})," - Full TypeScript support with proper types"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Abstract client"})," - Simplified API for calling gRPC methods"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Server configuration"})," - Ready-to-use configuration with health checks and reflection"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Global module"})," - Available throughout your application"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multiple clients"})," - Configure multiple gRPC clients with unique names"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Abstract client"})," - Base class for simplifying gRPC calls"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Health Checks"})," - Automatic gRPC health check setup for servers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reflection"})," - gRPC reflection support for development"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type safety"})," - Full TypeScript support"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(n.h3,{id:"module-setup",children:"Module Setup"}),"\n",(0,s.jsxs)(n.p,{children:["Import ",(0,s.jsx)(n.code,{children:"GrpcModule"})," in your root module:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Module } from "@nestjs/common";\nimport { GrpcModule } from "@globalart/nestjs-grpc";\n\n@Module({\n  imports: [\n    GrpcModule.forRoot({\n      clients: [\n        {\n          clientName: "userService",\n          packageName: "user",\n          protoPath: "./proto/user.proto",\n          url: "localhost:5000",\n        },\n        {\n          clientName: "orderService",\n          packageName: "order",\n          protoPath: "./proto/order.proto",\n          url: "localhost:5001",\n        },\n      ],\n    }),\n  ],\n})\nexport class AppModule {}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"using-the-client",children:"Using the Client"}),"\n",(0,s.jsxs)(n.p,{children:["Use the ",(0,s.jsx)(n.code,{children:"InjectGrpcClient"})," decorator to inject the client:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Injectable } from "@nestjs/common";\nimport { InjectGrpcClient, AbstractGrpcClient } from "@globalart/nestjs-grpc";\nimport { ClientGrpc } from "@nestjs/microservices";\nimport { Observable } from "rxjs";\n\ninterface UserService {\n  getUser(data: { id: string }): Observable<{ id: string; name: string }>;\n  createUser(data: { name: string }): Observable<{ id: string; name: string }>;\n}\n\n@Injectable()\nexport class UserService extends AbstractGrpcClient {\n  constructor(\n    @InjectGrpcClient("userService")\n    private readonly client: ClientGrpc\n  ) {\n    super(client);\n  }\n\n  async getUserById(id: string) {\n    return this.service<UserService>("UserService").call("getUser", { id });\n  }\n\n  async createUser(name: string) {\n    return this.service<UserService>("UserService").call("createUser", {\n      name,\n    });\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"configuring-grpc-server",children:"Configuring gRPC Server"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"getGrpcConfig"})," to configure a gRPC server:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { NestFactory } from "@nestjs/core";\nimport { MicroserviceOptions } from "@nestjs/microservices";\nimport { getGrpcConfig } from "@globalart/nestjs-grpc";\nimport { AppModule } from "./app.module";\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  const grpcOptions: MicroserviceOptions = getGrpcConfig({\n    url: "0.0.0.0:5000",\n    packageName: "user",\n    protoPath: "./proto/user.proto",\n  });\n\n  app.connectMicroservice(grpcOptions);\n  await app.startAllMicroservices();\n  await app.listen(3000);\n}\n\nbootstrap();\n'})}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"grpcmoduleoptions",children:"GrpcModuleOptions"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"clients"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"GrpcOptionsClient[]"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Array of gRPC client configurations"})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"grpcoptionsclient",children:"GrpcOptionsClient"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"clientName"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Unique client name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"packageName"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Proto package name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"protoPath"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Path to proto file"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"url"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"gRPC server URL"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.h3,{id:"create-a-client",children:"Create a client"}),"\n",(0,s.jsx)(n.p,{children:"The abstract class simplifies working with gRPC calls:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Injectable } from "@nestjs/common";\nimport { InjectGrpcClient, AbstractGrpcClient } from "@globalart/nestjs-grpc";\nimport { ClientGrpc } from "@nestjs/microservices";\nimport { Observable } from "rxjs";\n\ninterface OrderService {\n  getOrder(data: { id: string }): Observable<{ id: string; total: number }>;\n  createOrder(data: { items: string[] }): Observable<{ id: string }>;\n}\n\n@Injectable()\nexport class OrderService extends AbstractGrpcClient {\n  constructor(\n    @InjectGrpcClient("orderService")\n    private readonly client: ClientGrpc\n  ) {\n    super(client);\n  }\n\n  async getOrderById(id: string) {\n    return this.service<OrderService>("OrderService").call("getOrder", {\n      id,\n    });\n  }\n\n  async createOrder(items: string[]) {\n    return this.service<OrderService>("OrderService").call("createOrder", {\n      items,\n    });\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"usage-with-metadata",children:"Usage with metadata"}),"\n",(0,s.jsx)(n.h4,{id:"sending-metadata",children:"Sending metadata"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Injectable } from "@nestjs/common";\nimport { InjectGrpcService, GrpcService } from "@globalart/nestjs-grpc";\n\n@Injectable()\nexport class MyService {\n  constructor(\n    @InjectGrpcService()\n    private readonly grpcService: GrpcService,\n    private readonly orderService: OrderService\n  ) {}\n\n  async getOrder(id: string) {\n    this.grpcService.addMetadata("x-custom-header", "some-value");\n    return this.orderService.getOrderById(id);\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"receiving-metadata",children:"Receiving metadata"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Injectable } from "@nestjs/common";\nimport { InjectGrpcService, GrpcService } from "@globalart/nestjs-grpc";\n\n@Injectable()\nexport class MyService {\n  constructor(\n    @InjectGrpcService()\n    private readonly grpcService: GrpcService\n  ) {}\n\n  async getOrder(id: string) {\n    const metadata = this.grpcService.getMetadata();\n    return metadata.get("x-custom-header");\n  }\n}\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Warning: all clients must be used through an abstract client class in order to pass metadata via the microservices context"})}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(n.h3,{id:"grpcmodule",children:"GrpcModule"}),"\n",(0,s.jsx)(n.h4,{id:"forrootoptions-grpcoptions-dynamicmodule",children:(0,s.jsx)(n.code,{children:"forRoot(options: GrpcOptions): DynamicModule"})}),"\n",(0,s.jsx)(n.p,{children:"Creates a global module with configured gRPC clients."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options"})," - Module configuration with an array of clients"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"DynamicModule"})," - Configured module"]}),"\n",(0,s.jsx)(n.h3,{id:"abstractgrpcclient",children:"AbstractGrpcClient"}),"\n",(0,s.jsxs)(n.p,{children:["Base class for simplifying work with gRPC clients. Requires only a ",(0,s.jsx)(n.code,{children:"ClientGrpc"})," instance in the constructor."]}),"\n",(0,s.jsx)(n.p,{children:"Calls a gRPC method and returns the result."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"serviceName"})," - Service name in the proto file"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"methodName"})," - Method name to call"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"payload"})," - Data to pass to the method"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Type Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"T"})," - Interface describing the gRPC service methods"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"K"})," - Key of the service interface (method name)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," Promise with the call result"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'interface UserService {\n  getUser(data: { id: string }): Observable<{ id: string; name: string }>;\n}\n\nconst result = await this.service<UserService>("UserService").call("getUser", {\n  id: "123",\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"injectgrpcclient",children:"InjectGrpcClient"}),"\n",(0,s.jsx)(n.p,{children:"Decorator for injecting a gRPC client."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"})," - Client name specified in the configuration"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'constructor(\n  @InjectGrpcClient("userService")\n  private readonly client: ClientGrpc\n) {}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getgrpcconfig",children:"getGrpcConfig"}),"\n",(0,s.jsx)(n.p,{children:"Function for creating gRPC server configuration with health checks and reflection support."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options"})," - Server configuration:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"url"})," - URL to listen on"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"packageName"})," - Proto package name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"protoPath"})," - Path to proto file"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"MicroserviceOptions"})," - Configuration for NestJS microservice"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const grpcOptions = getGrpcConfig({\n  url: "0.0.0.0:5000",\n  packageName: "user",\n  protoPath: "./proto/user.proto",\n});\n'})}),"\n",(0,s.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,s.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,s.jsxs)(n.p,{children:["When using ",(0,s.jsx)(n.code,{children:"getGrpcConfig"}),", the gRPC health check service is automatically configured. This allows you to use standard tools for service health checks."]}),"\n",(0,s.jsx)(n.h3,{id:"reflection",children:"Reflection"}),"\n",(0,s.jsxs)(n.p,{children:["gRPC reflection is also automatically configured, which simplifies development and debugging with tools like ",(0,s.jsx)(n.code,{children:"grpcurl"})," or ",(0,s.jsx)(n.code,{children:"Postman"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"global-module",children:"Global Module"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"GrpcModule"})," is registered as a global module, meaning all configured clients are available in all application modules without needing to import ",(0,s.jsx)(n.code,{children:"GrpcModule"})," in each module."]}),"\n",(0,s.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Injectable } from "@nestjs/common";\nimport { InjectGrpcClient, AbstractGrpcClient } from "@globalart/nestjs-grpc";\nimport { ClientGrpc, RpcException } from "@nestjs/microservices";\nimport { Observable } from "rxjs";\n\ninterface UserService {\n  getUser(data: { id: string }): Observable<{ id: string; name: string }>;\n}\n\n@Injectable()\nexport class UserService extends AbstractGrpcClient {\n  constructor(\n    @InjectGrpcClient("userService")\n    private readonly client: ClientGrpc\n  ) {\n    super(client);\n  }\n\n  async getUserById(id: string) {\n    try {\n      return await this.service<UserService>("UserService").call("getUser", {\n        id,\n      });\n    } catch (error) {\n      if (error instanceof RpcException) {\n        throw new Error(`gRPC error: ${error.message}`);\n      }\n      throw error;\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"using-multiple-clients",children:"Using Multiple Clients"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Module } from "@nestjs/common";\nimport { GrpcModule } from "@globalart/nestjs-grpc";\n\n@Module({\n  imports: [\n    GrpcModule.forRoot({\n      clients: [\n        {\n          clientName: "userService",\n          packageName: "user",\n          protoPath: "./proto/user.proto",\n          url: "localhost:5000",\n        },\n        {\n          clientName: "orderService",\n          packageName: "order",\n          protoPath: "./proto/order.proto",\n          url: "localhost:5001",\n        },\n        {\n          clientName: "paymentService",\n          packageName: "payment",\n          protoPath: "./proto/payment.proto",\n          url: "localhost:5002",\n        },\n      ],\n    }),\n  ],\n})\nexport class AppModule {}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use types"})," - Define interfaces for your gRPC services for type safety"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Handle errors"})," - Always handle errors from gRPC calls"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use AbstractGrpcClient"})," - Simplifies code and makes it more readable. Just pass ",(0,s.jsx)(n.code,{children:"ClientGrpc"})," to the constructor"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Specify types in call method"})," - Always specify the service interface and method name as type parameters when calling ",(0,s.jsx)(n.code,{children:"call"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configure health checks"})," - Use ",(0,s.jsx)(n.code,{children:"getGrpcConfig"})," for automatic health check setup"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Organize proto files"})," - Store proto files in a separate directory"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"client-not-found",children:"Client Not Found"}),"\n",(0,s.jsx)(n.p,{children:'If you get a "Grpc client not found" error, make sure:'}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["The client name in ",(0,s.jsx)(n.code,{children:"InjectGrpcClient"})," matches the ",(0,s.jsx)(n.code,{children:"clientName"})," in the configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GrpcModule"})," is imported in the root module"]}),"\n",(0,s.jsx)(n.li,{children:"The client is used after module initialization"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"connection-errors",children:"Connection Errors"}),"\n",(0,s.jsx)(n.p,{children:"If you experience connection issues:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Check that the gRPC server is running and accessible"}),"\n",(0,s.jsx)(n.li,{children:"Ensure the URL is specified correctly"}),"\n",(0,s.jsx)(n.li,{children:"Check network settings and firewalls"}),"\n",(0,s.jsx)(n.li,{children:"Make sure the proto file exists and the path is correct"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"type-issues",children:"Type Issues"}),"\n",(0,s.jsx)(n.p,{children:"If TypeScript cannot determine types:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Make sure you've defined an interface for your gRPC service"}),"\n",(0,s.jsxs)(n.li,{children:["Always specify both type parameters when calling the ",(0,s.jsx)(n.code,{children:"call"})," method: ",(0,s.jsx)(n.code,{children:'call<ServiceInterface, "methodName">'})]}),"\n",(0,s.jsx)(n.li,{children:"Verify that types in the interface match the proto definition"}),"\n",(0,s.jsxs)(n.li,{children:["Ensure the service interface methods return ",(0,s.jsx)(n.code,{children:"Observable<T>"})," where T is the response type"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);