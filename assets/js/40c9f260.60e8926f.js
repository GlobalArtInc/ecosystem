"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[749],{946:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var t=r(3917);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}},1504:(e,n,r)=>{r.d(n,{A:()=>P});var t=r(3917),i=r(3372),s=r(5919),a=r(482),l=r(2191),o=r(1040),c=r(5809),d=r(983);function u(e){return t.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:r,default:t}})=>({value:e,label:n,attributes:r,default:t}))}(r);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const r=(0,a.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(i),(0,t.useCallback)(e=>{if(!i)return;const n=new URLSearchParams(r.location.search);n.set(i,e),r.replace({...r.location,search:n.toString()})},[i,r])]}function g(e){const{defaultValue:n,queryString:r=!1,groupId:i}=e,s=h(e),[a,o]=(0,t.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s})),[c,u]=m({queryString:r,groupId:i}),[g,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,i]=(0,d.Dv)(n);return[r,(0,t.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:i}),x=(()=>{const e=c??g;return p({value:e,tabValues:s})?e:null})();(0,l.A)(()=>{x&&o(x)},[x]);return{selectedValue:a,selectValue:(0,t.useCallback)(e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),j(e)},[u,j,s]),tabValues:s}}var j=r(9405);const x={tabList:"tabList_jdop",tabItem:"tabItem_H_fJ"};var y=r(1273);function f({className:e,block:n,selectedValue:r,selectValue:t,tabValues:a}){const l=[],{blockElementScrollPositionUntilNextRender:o}=(0,s.a_)(),c=e=>{const n=e.currentTarget,i=l.indexOf(n),s=a[i].value;s!==r&&(o(n),t(s))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;n=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;n=l[r]??l[l.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:t})=>(0,y.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...t,className:(0,i.A)("tabs__item",x.tabItem,t?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function b({lazy:e,children:n,selectedValue:r}){const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===r);return e?(0,t.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function v(e){const n=g(e);return(0,y.jsxs)("div",{className:(0,i.A)("tabs-container",x.tabList),children:[(0,y.jsx)(f,{...n,...e}),(0,y.jsx)(b,{...n,...e})]})}function P(e){const n=(0,j.A)();return(0,y.jsx)(v,{...e,children:u(e.children)},String(n))}},4905:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"packages/nestjs-typeorm-pagination","title":"nestjs-typeorm-pagination","description":"A comprehensive pagination and filtering utility for TypeORM repositories and query builders in NestJS applications.","source":"@site/content/packages/nestjs-typeorm-pagination.mdx","sourceDirName":"packages","slug":"/packages/nestjs-typeorm-pagination","permalink":"/packages/nestjs-typeorm-pagination","draft":false,"unlisted":false,"editUrl":"https://github.com/GlobalArtInc/nestjs-toolkit/tree/main/docs/content/packages/nestjs-typeorm-pagination.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"nestjs-logger","permalink":"/packages/nestjs-logger"},"next":{"title":"nestjs-microservices","permalink":"/packages/nestjs-microservices"}}');var i=r(1273),s=r(946),a=r(1504),l=r(6164);const o={sidebar_position:2},c="nestjs-typeorm-pagination",d={},u=[{value:"Installation",id:"installation",level:2},{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Paginate Decorator",id:"paginate-decorator",level:3},{value:"PaginateQuery Interface",id:"paginatequery-interface",level:4},{value:"Paginate Function",id:"paginate-function",level:3},{value:"Parameters",id:"parameters",level:4},{value:"PaginateConfig Interface",id:"paginateconfig-interface",level:4},{value:"Paginated Result",id:"paginated-result",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Basic Pagination",id:"basic-pagination",level:3},{value:"With Search and Filtering",id:"with-search-and-filtering",level:3},{value:"With Relations",id:"with-relations",level:3},{value:"Using Query Builder",id:"using-query-builder",level:3},{value:"Query Parameters",id:"query-parameters",level:2},{value:"Pagination",id:"pagination",level:3},{value:"Sorting",id:"sorting",level:3},{value:"Search",id:"search",level:3},{value:"Filtering",id:"filtering",level:3},{value:"Selection",id:"selection",level:3},{value:"Filter Operators",id:"filter-operators",level:2},{value:"Swagger Integration",id:"swagger-integration",level:2},{value:"Advanced Examples",id:"advanced-examples",level:2},{value:"Custom Where Conditions",id:"custom-where-conditions",level:3},{value:"Multiple Where Conditions",id:"multiple-where-conditions",level:3},{value:"Custom Query Builder with Joins",id:"custom-query-builder-with-joins",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Performance Tips",id:"performance-tips",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"nestjs-typeorm-pagination",children:"nestjs-typeorm-pagination"})}),"\n",(0,i.jsx)(n.p,{children:"A comprehensive pagination and filtering utility for TypeORM repositories and query builders in NestJS applications."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(a.A,{groupId:"npm2yarn",children:[(0,i.jsx)(l.A,{value:"npm",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install @globalart/nestjs-typeorm-pagination\n"})})}),(0,i.jsx)(l.A,{value:"yarn",label:"Yarn",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"yarn add @globalart/nestjs-typeorm-pagination\n"})})}),(0,i.jsx)(l.A,{value:"pnpm",label:"pnpm",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pnpm add @globalart/nestjs-typeorm-pagination\n"})})}),(0,i.jsx)(l.A,{value:"bun",label:"Bun",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"bun add @globalart/nestjs-typeorm-pagination\n"})})})]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"This package provides a complete solution for implementing pagination, filtering, sorting, and searching in your NestJS applications using TypeORM. It includes decorators, DTOs, and utility functions that make it easy to add these features to your API endpoints."}),"\n",(0,i.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\ud83d\udcc4 ",(0,i.jsx)(n.strong,{children:"Pagination"})," - Easy-to-use pagination with configurable limits"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udd0d ",(0,i.jsx)(n.strong,{children:"Search"})," - Full-text search across multiple columns"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83c\udfaf ",(0,i.jsx)(n.strong,{children:"Filtering"})," - Advanced filtering with multiple operators"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udcca ",(0,i.jsx)(n.strong,{children:"Sorting"})," - Multi-column sorting with custom order"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83c\udfa8 ",(0,i.jsx)(n.strong,{children:"Swagger Integration"})," - Automatic OpenAPI documentation"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udd27 ",(0,i.jsx)(n.strong,{children:"TypeScript Support"})," - Full type safety and IntelliSense"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\ude80 ",(0,i.jsx)(n.strong,{children:"Performance Optimized"})," - Efficient queries with proper indexing"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Controller, Get } from '@nestjs/common';\nimport { Paginate, PaginateQuery } from '@globalart/nestjs-typeorm-pagination';\nimport { paginate, Paginated } from '@globalart/nestjs-typeorm-pagination';\nimport { Repository } from 'typeorm';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { User } from './user.entity';\n\n@Controller('users')\nexport class UsersController {\n  constructor(\n    @InjectRepository(User)\n    private readonly userRepository: Repository<User>,\n  ) {}\n\n  @Get()\n  async getUsers(@Paginate() query: PaginateQuery): Promise<Paginated<User>> {\n    return paginate(query, this.userRepository, {\n      sortableColumns: ['id', 'name', 'email', 'createdAt'],\n      searchableColumns: ['name', 'email'],\n      filterableColumns: {\n        name: true,\n        email: true,\n        createdAt: ['gte', 'lte'],\n      },\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,i.jsx)(n.h3,{id:"paginate-decorator",children:"Paginate Decorator"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"@Paginate()"})," decorator extracts pagination parameters from the request query and provides a structured ",(0,i.jsx)(n.code,{children:"PaginateQuery"})," object."]}),"\n",(0,i.jsx)(n.h4,{id:"paginatequery-interface",children:"PaginateQuery Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface PaginateQuery {\n  page?: number;           // Current page number\n  limit?: number;          // Items per page\n  sortBy?: [string, string][]; // Sorting configuration\n  searchBy?: string[];     // Columns to search in\n  search?: string;         // Search term\n  filter?: { [column: string]: string | string[] }; // Filter conditions\n  select?: string[];       // Columns to select\n  path: string;           // Current request path\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"paginate-function",children:"Paginate Function"}),"\n",(0,i.jsxs)(n.p,{children:["The main ",(0,i.jsx)(n.code,{children:"paginate"})," function handles the pagination logic and returns a ",(0,i.jsx)(n.code,{children:"Paginated"})," result."]}),"\n",(0,i.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"query"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PaginateQuery"})}),(0,i.jsx)(n.td,{children:"Pagination query parameters"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"repo"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Repository<T> | SelectQueryBuilder<T>"})}),(0,i.jsx)(n.td,{children:"TypeORM repository or query builder"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"config"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PaginateConfig<T>"})}),(0,i.jsx)(n.td,{children:"Pagination configuration"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"paginateconfig-interface",children:"PaginateConfig Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface PaginateConfig<T> {\n  relations?: FindOptionsRelations<T> | RelationColumn<T>[] | FindOptionsRelationByString;\n  sortableColumns: Column<T>[];                    // Columns that can be sorted\n  nullSort?: 'first' | 'last';                     // How to handle null values in sorting\n  searchableColumns?: Column<T>[];                 // Columns to search in\n  select?: Column<T>[] | string[];                 // Columns to select\n  maxLimit?: number;                               // Maximum items per page\n  defaultSortBy?: SortBy<T>;                       // Default sorting\n  defaultLimit?: number;                           // Default items per page\n  where?: FindOptionsWhere<T> | FindOptionsWhere<T>[]; // Additional where conditions\n  filterableColumns?: {                            // Filterable columns and operators\n    [key in Column<T> | string]?: (FilterOperator | FilterSuffix)[] | true;\n  };\n  loadEagerRelations?: boolean;                    // Load eager relations\n  withDeleted?: boolean;                           // Include soft-deleted records\n  paginationType?: PaginationType;                 // Pagination type\n  relativePath?: boolean;                          // Use relative paths\n  origin?: string;                                 // Origin URL\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"paginated-result",children:"Paginated Result"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"class Paginated<T> {\n  data: T[];                    // Array of items\n  payload: {\n    pagination: {\n      limit: number;            // Items per page\n      totalItems: number;       // Total number of items\n      page: number;             // Current page\n      total: number;            // Total number of pages\n      sortBy: SortBy<T>;        // Current sorting\n      searchBy: Column<T>[];    // Search columns\n      search: string;           // Search term\n      select: string[];         // Selected columns\n      filter?: { [column: string]: string | string[] }; // Applied filters\n      links: {                  // Pagination links\n        url?: string;\n        label?: string;\n        active?: boolean;\n        page?: number;\n      }[];\n    };\n  };\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,i.jsx)(n.h3,{id:"basic-pagination",children:"Basic Pagination"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Controller, Get } from '@nestjs/common';\nimport { Paginate, PaginateQuery } from '@globalart/nestjs-typeorm-pagination';\nimport { paginate, Paginated } from '@globalart/nestjs-typeorm-pagination';\nimport { Repository } from 'typeorm';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { User } from './user.entity';\n\n@Controller('users')\nexport class UsersController {\n  constructor(\n    @InjectRepository(User)\n    private readonly userRepository: Repository<User>,\n  ) {}\n\n  @Get()\n  async getUsers(@Paginate() query: PaginateQuery): Promise<Paginated<User>> {\n    return paginate(query, this.userRepository, {\n      sortableColumns: ['id', 'name', 'email', 'createdAt'],\n      defaultSortBy: [['createdAt', 'DESC']],\n      defaultLimit: 20,\n      maxLimit: 100,\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"with-search-and-filtering",children:"With Search and Filtering"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"@Controller('users')\nexport class UsersController {\n  constructor(\n    @InjectRepository(User)\n    private readonly userRepository: Repository<User>,\n  ) {}\n\n  @Get()\n  async getUsers(@Paginate() query: PaginateQuery): Promise<Paginated<User>> {\n    return paginate(query, this.userRepository, {\n      sortableColumns: ['id', 'name', 'email', 'createdAt'],\n      searchableColumns: ['name', 'email'],\n      filterableColumns: {\n        name: true,\n        email: true,\n        createdAt: ['gte', 'lte'],\n        status: ['eq', 'in'],\n      },\n      defaultSortBy: [['createdAt', 'DESC']],\n      defaultLimit: 20,\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"with-relations",children:"With Relations"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"@Controller('posts')\nexport class PostsController {\n  constructor(\n    @InjectRepository(Post)\n    private readonly postRepository: Repository<Post>,\n  ) {}\n\n  @Get()\n  async getPosts(@Paginate() query: PaginateQuery): Promise<Paginated<Post>> {\n    return paginate(query, this.postRepository, {\n      sortableColumns: ['id', 'title', 'createdAt'],\n      searchableColumns: ['title', 'content'],\n      relations: ['author', 'categories'],\n      filterableColumns: {\n        authorId: ['eq'],\n        categoryId: ['in'],\n        published: ['eq'],\n        createdAt: ['gte', 'lte'],\n      },\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"using-query-builder",children:"Using Query Builder"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"@Controller('users')\nexport class UsersController {\n  constructor(\n    @InjectRepository(User)\n    private readonly userRepository: Repository<User>,\n  ) {}\n\n  @Get('active')\n  async getActiveUsers(@Paginate() query: PaginateQuery): Promise<Paginated<User>> {\n    const queryBuilder = this.userRepository\n      .createQueryBuilder('user')\n      .where('user.isActive = :isActive', { isActive: true });\n\n    return paginate(query, queryBuilder, {\n      sortableColumns: ['id', 'name', 'email', 'createdAt'],\n      searchableColumns: ['name', 'email'],\n      filterableColumns: {\n        name: true,\n        email: true,\n        createdAt: ['gte', 'lte'],\n      },\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,i.jsx)(n.h3,{id:"pagination",children:"Pagination"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"page"})," - Page number (default: 1)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"limit"})," - Items per page (default: 20, max: 100)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sorting",children:"Sorting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sortBy"})," - Sort configuration in format ",(0,i.jsx)(n.code,{children:"column:direction"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Example: ",(0,i.jsx)(n.code,{children:"?sortBy=name:ASC&sortBy=createdAt:DESC"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"search",children:"Search"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"search"})," - Search term"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"searchBy"})," - Columns to search in","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Example: ",(0,i.jsx)(n.code,{children:"?search=john&searchBy=name&searchBy=email"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"filtering",children:"Filtering"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"filter.column"})," - Filter by specific column","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Example: ",(0,i.jsx)(n.code,{children:"?filter.name=john&filter.createdAt.gte=2023-01-01"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"selection",children:"Selection"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"select"})," - Columns to select","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Example: ",(0,i.jsx)(n.code,{children:"?select=id,name,email"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"filter-operators",children:"Filter Operators"}),"\n",(0,i.jsx)(n.p,{children:"The package supports various filter operators:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"eq"})," - Equal"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ne"})," - Not equal"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"gt"})," - Greater than"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"gte"})," - Greater than or equal"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"lt"})," - Less than"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"lte"})," - Less than or equal"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"in"})," - In array"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"notIn"})," - Not in array"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"like"})," - Like pattern"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"notLike"})," - Not like pattern"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isNull"})," - Is null"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isNotNull"})," - Is not null"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"swagger-integration",children:"Swagger Integration"}),"\n",(0,i.jsx)(n.p,{children:"The package includes Swagger decorators for automatic API documentation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Controller, Get } from '@nestjs/common';\nimport { \n  Paginate, \n  PaginateQuery,\n  ApiPaginatedQuery,\n  ApiOkPaginatedResponse \n} from '@globalart/nestjs-typeorm-pagination';\nimport { paginate, Paginated } from '@globalart/nestjs-typeorm-pagination';\nimport { User } from './user.entity';\n\n@Controller('users')\nexport class UsersController {\n  @Get()\n  @ApiPaginatedQuery()\n  @ApiOkPaginatedResponse(User)\n  async getUsers(@Paginate() query: PaginateQuery): Promise<Paginated<User>> {\n    return paginate(query, this.userRepository, {\n      sortableColumns: ['id', 'name', 'email', 'createdAt'],\n      searchableColumns: ['name', 'email'],\n      filterableColumns: {\n        name: true,\n        email: true,\n        createdAt: ['gte', 'lte'],\n      },\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-examples",children:"Advanced Examples"}),"\n",(0,i.jsx)(n.h3,{id:"custom-where-conditions",children:"Custom Where Conditions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"@Get('admin')\nasync getAdminUsers(@Paginate() query: PaginateQuery): Promise<Paginated<User>> {\n  return paginate(query, this.userRepository, {\n    sortableColumns: ['id', 'name', 'email', 'createdAt'],\n    where: { role: 'admin' },\n    searchableColumns: ['name', 'email'],\n  });\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"multiple-where-conditions",children:"Multiple Where Conditions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"@Get('filtered')\nasync getFilteredUsers(@Paginate() query: PaginateQuery): Promise<Paginated<User>> {\n  return paginate(query, this.userRepository, {\n    sortableColumns: ['id', 'name', 'email', 'createdAt'],\n    where: [\n      { role: 'admin' },\n      { role: 'moderator' }\n    ],\n    searchableColumns: ['name', 'email'],\n  });\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"custom-query-builder-with-joins",children:"Custom Query Builder with Joins"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"@Get('with-posts')\nasync getUsersWithPosts(@Paginate() query: PaginateQuery): Promise<Paginated<User>> {\n  const queryBuilder = this.userRepository\n    .createQueryBuilder('user')\n    .leftJoinAndSelect('user.posts', 'post')\n    .where('post.published = :published', { published: true });\n\n  return paginate(query, queryBuilder, {\n    sortableColumns: ['user.id', 'user.name', 'user.email', 'user.createdAt'],\n    searchableColumns: ['user.name', 'user.email'],\n    filterableColumns: {\n      'user.name': true,\n      'user.email': true,\n      'user.createdAt': ['gte', 'lte'],\n    },\n  });\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Define sortable columns"})," - Always specify which columns can be sorted to prevent SQL injection"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Set reasonable limits"})," - Use ",(0,i.jsx)(n.code,{children:"maxLimit"})," to prevent performance issues"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Index searchable columns"})," - Add database indexes on columns used for search"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use relations wisely"})," - Only load necessary relations to avoid N+1 queries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validate filter operators"})," - Only allow safe filter operators for each column"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cache when possible"})," - Consider caching for frequently accessed data"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Add database indexes on sortable and searchable columns"}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"select"})," to limit returned columns when full entities aren't needed"]}),"\n",(0,i.jsx)(n.li,{children:"Consider using query builder for complex queries with joins"}),"\n",(0,i.jsxs)(n.li,{children:["Set appropriate ",(0,i.jsx)(n.code,{children:"maxLimit"})," to prevent large result sets"]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"withDeleted: false"})," when you don't need soft-deleted records"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},6164:(e,n,r)=>{r.d(n,{A:()=>a});r(3917);var t=r(3372);const i={tabItem:"tabItem_Gg0S"};var s=r(1273);function a({children:e,hidden:n,className:r}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.A)(i.tabItem,r),hidden:n,children:e})}}}]);